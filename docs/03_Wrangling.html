<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.242">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data management and analysis in R – wrangling</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./discdown_logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Data management and analysis in R</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./00_Resources.html">
 <span class="menu-text">Resources</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
      <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">Home</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./00_Organisation.html" class="sidebar-item-text sidebar-link">Course introduction</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01_Introduction.html" class="sidebar-item-text sidebar-link">Getting started with R</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./02_Visualisation.html" class="sidebar-item-text sidebar-link">Data visualisation</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02_Exercise.html" class="sidebar-item-text sidebar-link">Exercise</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="./03_Wrangling.html" class="sidebar-item-text sidebar-link active">Data Wrangling</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03_Exercise.html" class="sidebar-item-text sidebar-link">Exercise</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04_Reading.html" class="sidebar-item-text sidebar-link">Reading data</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#data-wrangling" id="toc-data-wrangling" class="nav-link active" data-scroll-target="#data-wrangling">Data Wrangling</a>
  <ul class="collapse">
  <li><a href="#transforming-data-using-dplyr" id="toc-transforming-data-using-dplyr" class="nav-link" data-scroll-target="#transforming-data-using-dplyr">Transforming data using <code>dplyr</code></a></li>
  </ul></li>
  <li><a href="#subsetting" id="toc-subsetting" class="nav-link" data-scroll-target="#subsetting">Subsetting</a></li>
  <li><a href="#filter-rows-with-filter" id="toc-filter-rows-with-filter" class="nav-link" data-scroll-target="#filter-rows-with-filter">Filter rows with filter()</a></li>
  <li><a href="#comparisons" id="toc-comparisons" class="nav-link" data-scroll-target="#comparisons">Comparisons</a></li>
  <li><a href="#logical-operators" id="toc-logical-operators" class="nav-link" data-scroll-target="#logical-operators">Logical operators</a></li>
  <li><a href="#negate-statements" id="toc-negate-statements" class="nav-link" data-scroll-target="#negate-statements">Negate statements</a></li>
  <li><a href="#arrange-data" id="toc-arrange-data" class="nav-link" data-scroll-target="#arrange-data">Arrange data</a></li>
  <li><a href="#arrange-rows-in-ascending-order-arrange" id="toc-arrange-rows-in-ascending-order-arrange" class="nav-link" data-scroll-target="#arrange-rows-in-ascending-order-arrange">Arrange rows in ascending order: arrange()</a></li>
  <li><a href="#arrange-in-reversed-order" id="toc-arrange-in-reversed-order" class="nav-link" data-scroll-target="#arrange-in-reversed-order">arrange in reversed order</a></li>
  <li><a href="#arrange-multiple-variables" id="toc-arrange-multiple-variables" class="nav-link" data-scroll-target="#arrange-multiple-variables">arrange(): multiple variables</a></li>
  <li><a href="#select-variables" id="toc-select-variables" class="nav-link" data-scroll-target="#select-variables">Select variables</a></li>
  <li><a href="#select-columns-select" id="toc-select-columns-select" class="nav-link" data-scroll-target="#select-columns-select">Select columns: select()</a></li>
  <li><a href="#reverse-selection" id="toc-reverse-selection" class="nav-link" data-scroll-target="#reverse-selection">Reverse selection</a></li>
  <li><a href="#select-helper-functions" id="toc-select-helper-functions" class="nav-link" data-scroll-target="#select-helper-functions">select(): helper functions</a></li>
  <li><a href="#create-new-variables-mutate" id="toc-create-new-variables-mutate" class="nav-link" data-scroll-target="#create-new-variables-mutate">Create new variables: mutate()</a></li>
  <li><a href="#calculate-a-new-variable" id="toc-calculate-a-new-variable" class="nav-link" data-scroll-target="#calculate-a-new-variable">Calculate a new variable</a></li>
  <li><a href="#calculate-a-new-variable-in-multiple-steps" id="toc-calculate-a-new-variable-in-multiple-steps" class="nav-link" data-scroll-target="#calculate-a-new-variable-in-multiple-steps">Calculate a new variable in multiple steps</a></li>
  <li><a href="#the-pipe-operators-and-1" id="toc-the-pipe-operators-and-1" class="nav-link" data-scroll-target="#the-pipe-operators-and-1">The Pipe Operators: <code>%&gt;%</code> and <code>|&gt;</code></a></li>
  <li><a href="#how-to-use-the-pipe" id="toc-how-to-use-the-pipe" class="nav-link" data-scroll-target="#how-to-use-the-pipe">How to use the pipe %&gt;%</a></li>
  <li><a href="#combine-multiple-operations" id="toc-combine-multiple-operations" class="nav-link" data-scroll-target="#combine-multiple-operations">Combine Multiple Operations: %&gt;%</a></li>
  <li><a href="#combine-pipe-with-ggplot" id="toc-combine-pipe-with-ggplot" class="nav-link" data-scroll-target="#combine-pipe-with-ggplot">Combine Pipe with ggplot()</a></li>
  <li><a href="#time-to-try-it-yourself" id="toc-time-to-try-it-yourself" class="nav-link" data-scroll-target="#time-to-try-it-yourself">Time to try it yourself:</a></li>
  <li><a href="#summarising-and-grouping-data" id="toc-summarising-and-grouping-data" class="nav-link" data-scroll-target="#summarising-and-grouping-data">Summarising and grouping data</a></li>
  <li><a href="#summarize-data-summarise" id="toc-summarize-data-summarise" class="nav-link" data-scroll-target="#summarize-data-summarise">Summarize data: summarise()</a></li>
  <li><a href="#multiple-summary-functions" id="toc-multiple-summary-functions" class="nav-link" data-scroll-target="#multiple-summary-functions">multiple summary functions</a></li>
  <li><a href="#summarize-different-groups-group_by-summarise" id="toc-summarize-different-groups-group_by-summarise" class="nav-link" data-scroll-target="#summarize-different-groups-group_by-summarise">Summarize different groups: group_by() &amp; summarise()</a></li>
  <li><a href="#group_by-with-several-grouping-variables" id="toc-group_by-with-several-grouping-variables" class="nav-link" data-scroll-target="#group_by-with-several-grouping-variables">Group_by() with several grouping variables</a></li>
  <li><a href="#advanced-example-group_by-summarise" id="toc-advanced-example-group_by-summarise" class="nav-link" data-scroll-target="#advanced-example-group_by-summarise">Advanced Example: Group_by() &amp; summarise()</a></li>
  <li><a href="#advanced-example-group_by-summarise-ggplot" id="toc-advanced-example-group_by-summarise-ggplot" class="nav-link" data-scroll-target="#advanced-example-group_by-summarise-ggplot">Advanced Example: Group_by() &amp; summarise() &amp; ggplot()</a></li>
  <li><a href="#group_by-mutate" id="toc-group_by-mutate" class="nav-link" data-scroll-target="#group_by-mutate">Group_by() &amp; mutate()</a></li>
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values">Missing values</a></li>
  <li><a href="#how-to-check-for-missing-values" id="toc-how-to-check-for-missing-values" class="nav-link" data-scroll-target="#how-to-check-for-missing-values">How to check for missing values</a></li>
  <li><a href="#calculations-with-missing-values" id="toc-calculations-with-missing-values" class="nav-link" data-scroll-target="#calculations-with-missing-values">Calculations with missing values</a></li>
  <li><a href="#removing-nas-from-dataset" id="toc-removing-nas-from-dataset" class="nav-link" data-scroll-target="#removing-nas-from-dataset">Removing NA’s from dataset</a></li>
  <li><a href="#data-wrangling-cheat-sheet" id="toc-data-wrangling-cheat-sheet" class="nav-link" data-scroll-target="#data-wrangling-cheat-sheet">Data Wrangling Cheat Sheet</a></li>
  <li><a href="#exercise-part-2" id="toc-exercise-part-2" class="nav-link" data-scroll-target="#exercise-part-2">Exercise Part 2</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/johannesingrisch/R4Eco-course/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="data-wrangling" class="level1">
<h1>Data Wrangling</h1>
<blockquote class="blockquote">
<p>The art of getting data into a useful form for visualisation and modelling.</p>
</blockquote>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="./figures/Data_wrangling.png" class="img-fluid figure-img"></p>
<p></p><figcaption class="figure-caption">Data wrangling</figcaption><p></p>
</figure>
</div>
<p>Most of the time the data will just not be in the format that we need or we will have to do additional manipulations and calculations and getting the data into the form that is needed can be very challenging. R and the tidyverse provide a bunch of very useful functions.</p>
<p>Mastering data wrangling is key for efficient processing of data.</p>
<section id="transforming-data-using-dplyr" class="level2">
<h2 class="anchored" data-anchor-id="transforming-data-using-dplyr">Transforming data using <code>dplyr</code></h2>
<p>A lot of useful functions are provided by the package <code>dplyr</code>.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="./figures/dplyr.png" class="img-fluid" style="width:15.0%"></p>
</div>
</div>
<ul>
<li>create subsets of data</li>
<li>create new variables</li>
<li>rename variables</li>
<li>reorder observations</li>
<li>…</li>
</ul>
</section>
</section>
<section id="subsetting" class="level1">
<h1>Subsetting</h1>
<p>Often we want to narrow down a large datset to a subset, either by filtering observations (i.e.&nbsp;reduce the number of rows) or by selecting specific variables only (i.e.&nbsp;reduce the number of columns).</p>
<p><code>Dplyr</code> provides two handy functions for this</p>
<ul>
<li>filter()</li>
<li>select()</li>
</ul>
</section>
<section id="filter-rows-with-filter" class="level2">
<h2 class="anchored" data-anchor-id="filter-rows-with-filter">Filter rows with filter()</h2>
<p>Create a subset of observations based on values of certain variables.</p>
<p>For this we use <strong>logical operators</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mpg, class <span class="sc">==</span> <span class="st">"2seater"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 11
  manufacturer model    displ  year   cyl trans    drv     cty   hwy fl    class
  &lt;chr&gt;        &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
1 chevrolet    corvette   5.7  1999     8 manual(… r        16    26 p     2sea…
2 chevrolet    corvette   5.7  1999     8 auto(l4) r        15    23 p     2sea…
3 chevrolet    corvette   6.2  2008     8 manual(… r        16    26 p     2sea…
4 chevrolet    corvette   6.2  2008     8 auto(s6) r        15    25 p     2sea…
5 chevrolet    corvette   7    2008     8 manual(… r        15    24 p     2sea…</code></pre>
</div>
</div>
<p>We can also use multiple conditions</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mpg, class <span class="sc">==</span> <span class="st">"2seater"</span>, trans <span class="sc">==</span> <span class="st">"auto(l4)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 11
  manufacturer model    displ  year   cyl trans    drv     cty   hwy fl    class
  &lt;chr&gt;        &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;    &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
1 chevrolet    corvette   5.7  1999     8 auto(l4) r        15    23 p     2sea…</code></pre>
</div>
</div>
</section>
<section id="comparisons" class="level2">
<h2 class="anchored" data-anchor-id="comparisons">Comparisons</h2>
<p>Using comparisons:</p>
<p><code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>==</code>, <code>!=</code></p>
<p>Example: Keep all data where <code>hwy</code> is larger or equal to and cyl is equal or less than 4.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mpg, hwy <span class="sc">&gt;=</span> <span class="dv">30</span>, cyl <span class="sc">&lt;=</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 26 × 11
   manufacturer model  displ  year   cyl trans     drv     cty   hwy fl    class
   &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;     &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
 1 audi         a4       2    2008     4 manual(m… f        20    31 p     comp…
 2 audi         a4       2    2008     4 auto(av)  f        21    30 p     comp…
 3 chevrolet    malibu   2.4  2008     4 auto(l4)  f        22    30 r     mids…
 4 honda        civic    1.6  1999     4 manual(m… f        28    33 r     subc…
 5 honda        civic    1.6  1999     4 auto(l4)  f        24    32 r     subc…
 6 honda        civic    1.6  1999     4 manual(m… f        25    32 r     subc…
 7 honda        civic    1.6  1999     4 auto(l4)  f        24    32 r     subc…
 8 honda        civic    1.8  2008     4 manual(m… f        26    34 r     subc…
 9 honda        civic    1.8  2008     4 auto(l5)  f        25    36 r     subc…
10 honda        civic    1.8  2008     4 auto(l5)  f        24    36 c     subc…
# … with 16 more rows</code></pre>
</div>
</div>
<p>Take care:</p>
<p><code>=</code> instead of <code>==</code> produces error. Happens to me all the time…</p>
</section>
<section id="logical-operators" class="level2">
<h2 class="anchored" data-anchor-id="logical-operators">Logical operators</h2>
<p>We can use logical operators to filter data. The most important operators are illustrated in the following figure</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="./figures/Boolean_operators.png" class="img-fluid" style="width:60.0%"></p>
</div>
</div>
<p>Can be applied as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="do">## keep rows where cyl has value 4 OR 5</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mpg, cyl <span class="sc">==</span> <span class="dv">4</span> <span class="sc">|</span> cyl <span class="sc">==</span> <span class="dv">5</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># keep rows where cyl has value 4 but drv IS NOT "f"</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mpg, cyl <span class="sc">==</span> <span class="dv">4</span>,  drv <span class="sc">!=</span> <span class="st">"f"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Instead of using several OR conditions, <code>%in%</code> provides a nice shortcut and can simplify life:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mpg, cyl <span class="sc">==</span> <span class="dv">4</span> <span class="sc">|</span> cyl <span class="sc">==</span> <span class="dv">5</span>)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mpg, cyl <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">4</span>,<span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<blockquote class="blockquote">
<p>Combining multiple conditions can quickly become confusing. Consider doing it stepwise.</p>
</blockquote>
</section>
<section id="negate-statements" class="level2">
<h2 class="anchored" data-anchor-id="negate-statements">Negate statements</h2>
<p>Sometimes it is easier to define what should stay out, instead of what should stay in. We can define what should go out and use <code>!</code> to negate this statement. See the following example:</p>
<p>Aim : exclude all SUVs from manufacturer Chevrolet</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mpg, <span class="sc">!</span>(class <span class="sc">==</span> <span class="st">"suv"</span> <span class="sc">&amp;</span> manufacturer <span class="sc">==</span> <span class="st">"chevrolet"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="arrange-data" class="level1">
<h1>Arrange data</h1>
</section>
<section id="arrange-rows-in-ascending-order-arrange" class="level2">
<h2 class="anchored" data-anchor-id="arrange-rows-in-ascending-order-arrange">Arrange rows in ascending order: arrange()</h2>
<p>We can order the observations by values of one (or more) variable.</p>
<p>Example: order the dataset <code>mpg</code>in ascending order according to the variable <code>hwy</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(mpg, hwy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 234 × 11
   manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
   &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
 1 dodge        dakota pi…   4.7  2008     8 auto… 4         9    12 e     pick…
 2 dodge        durango 4…   4.7  2008     8 auto… 4         9    12 e     suv  
 3 dodge        ram 1500 …   4.7  2008     8 auto… 4         9    12 e     pick…
 4 dodge        ram 1500 …   4.7  2008     8 manu… 4         9    12 e     pick…
 5 jeep         grand che…   4.7  2008     8 auto… 4         9    12 e     suv  
 6 chevrolet    k1500 tah…   5.3  2008     8 auto… 4        11    14 e     suv  
 7 jeep         grand che…   6.1  2008     8 auto… 4        11    14 p     suv  
 8 chevrolet    c1500 sub…   5.3  2008     8 auto… r        11    15 e     suv  
 9 chevrolet    k1500 tah…   5.7  1999     8 auto… 4        11    15 r     suv  
10 dodge        dakota pi…   5.2  1999     8 auto… 4        11    15 r     pick…
# … with 224 more rows</code></pre>
</div>
</div>
</section>
<section id="arrange-in-reversed-order" class="level2">
<h2 class="anchored" data-anchor-id="arrange-in-reversed-order">arrange in reversed order</h2>
<p>By using <code>desc()</code>we can change the order to descending.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(mpg, <span class="fu">desc</span>(hwy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 234 × 11
   manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
   &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
 1 volkswagen   jetta        1.9  1999     4 manu… f        33    44 d     comp…
 2 volkswagen   new beetle   1.9  1999     4 manu… f        35    44 d     subc…
 3 volkswagen   new beetle   1.9  1999     4 auto… f        29    41 d     subc…
 4 toyota       corolla      1.8  2008     4 manu… f        28    37 r     comp…
 5 honda        civic        1.8  2008     4 auto… f        25    36 r     subc…
 6 honda        civic        1.8  2008     4 auto… f        24    36 c     subc…
 7 toyota       corolla      1.8  1999     4 manu… f        26    35 r     comp…
 8 toyota       corolla      1.8  2008     4 auto… f        26    35 r     comp…
 9 honda        civic        1.8  2008     4 manu… f        26    34 r     subc…
10 honda        civic        1.6  1999     4 manu… f        28    33 r     subc…
# … with 224 more rows</code></pre>
</div>
</div>
</section>
<section id="arrange-multiple-variables" class="level2">
<h2 class="anchored" data-anchor-id="arrange-multiple-variables">arrange(): multiple variables</h2>
<p>We can use multiple variables to define the order of the arranged dataset.</p>
<p>Note: order of the variables matters:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(mpg, <span class="fu">desc</span>(cyl), hwy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 234 × 11
   manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
   &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
 1 dodge        dakota pi…   4.7  2008     8 auto… 4         9    12 e     pick…
 2 dodge        durango 4…   4.7  2008     8 auto… 4         9    12 e     suv  
 3 dodge        ram 1500 …   4.7  2008     8 auto… 4         9    12 e     pick…
 4 dodge        ram 1500 …   4.7  2008     8 manu… 4         9    12 e     pick…
 5 jeep         grand che…   4.7  2008     8 auto… 4         9    12 e     suv  
 6 chevrolet    k1500 tah…   5.3  2008     8 auto… 4        11    14 e     suv  
 7 jeep         grand che…   6.1  2008     8 auto… 4        11    14 p     suv  
 8 chevrolet    c1500 sub…   5.3  2008     8 auto… r        11    15 e     suv  
 9 chevrolet    k1500 tah…   5.7  1999     8 auto… 4        11    15 r     suv  
10 dodge        dakota pi…   5.2  1999     8 auto… 4        11    15 r     pick…
# … with 224 more rows</code></pre>
</div>
</div>
</section>
<section id="select-variables" class="level1">
<h1>Select variables</h1>
</section>
<section id="select-columns-select" class="level2">
<h2 class="anchored" data-anchor-id="select-columns-select">Select columns: select()</h2>
<p>We can also choose specific columns of dataset (and remove the rest).</p>
<p>Example: From the dataset <code>mpg</code>we only want to keep the columns <code>model</code>, <code>drv</code>, andn <code>hwy</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mpg, model, drv, hwy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 234 × 3
   model      drv     hwy
   &lt;chr&gt;      &lt;chr&gt; &lt;int&gt;
 1 a4         f        29
 2 a4         f        29
 3 a4         f        31
 4 a4         f        30
 5 a4         f        26
 6 a4         f        26
 7 a4         f        27
 8 a4 quattro 4        26
 9 a4 quattro 4        25
10 a4 quattro 4        28
# … with 224 more rows</code></pre>
</div>
</div>
<p>Example: Keep all columns from <code>year</code> to <code>cty</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mpg, year<span class="sc">:</span>cty)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 234 × 5
    year   cyl trans      drv     cty
   &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt;
 1  1999     4 auto(l5)   f        18
 2  1999     4 manual(m5) f        21
 3  2008     4 manual(m6) f        20
 4  2008     4 auto(av)   f        21
 5  1999     6 auto(l5)   f        16
 6  1999     6 manual(m5) f        18
 7  2008     6 auto(av)   f        18
 8  1999     4 manual(m5) 4        18
 9  1999     4 auto(l5)   4        16
10  2008     4 manual(m6) 4        20
# … with 224 more rows</code></pre>
</div>
</div>
</section>
<section id="reverse-selection" class="level2">
<h2 class="anchored" data-anchor-id="reverse-selection">Reverse selection</h2>
<p>Instead of actively selecting the columns we want, we can also remove those which we don’t want:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mpg, <span class="sc">-</span>model, <span class="sc">-</span> cyl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 234 × 9
   manufacturer displ  year trans      drv     cty   hwy fl    class  
   &lt;chr&gt;        &lt;dbl&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  
 1 audi           1.8  1999 auto(l5)   f        18    29 p     compact
 2 audi           1.8  1999 manual(m5) f        21    29 p     compact
 3 audi           2    2008 manual(m6) f        20    31 p     compact
 4 audi           2    2008 auto(av)   f        21    30 p     compact
 5 audi           2.8  1999 auto(l5)   f        16    26 p     compact
 6 audi           2.8  1999 manual(m5) f        18    26 p     compact
 7 audi           3.1  2008 auto(av)   f        18    27 p     compact
 8 audi           1.8  1999 manual(m5) 4        18    26 p     compact
 9 audi           1.8  1999 auto(l5)   4        16    25 p     compact
10 audi           2    2008 manual(m6) 4        20    28 p     compact
# … with 224 more rows</code></pre>
</div>
</div>
</section>
<section id="select-helper-functions" class="level2">
<h2 class="anchored" data-anchor-id="select-helper-functions">select(): helper functions</h2>
<ul>
<li>reorder the columns</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mpg, hwy, cyl, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>rename columns</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rename</span>(mpg, <span class="at">efficiency =</span> hwy)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(mpg, <span class="at">efficiency =</span> hwy, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>various other options: see the help by calling <code>?select</code></li>
</ul>
</section>
<section id="create-new-variables-mutate" class="level1">
<h1>Create new variables: mutate()</h1>
<p>With <code>mutate()</code> we can create a new variable which is added at the end of our dataset.</p>
</section>
<section id="calculate-a-new-variable" class="level2">
<h2 class="anchored" data-anchor-id="calculate-a-new-variable">Calculate a new variable</h2>
<p>Example: Calculate fuel consumption (L / 100km) = 1 / hwy /2.352 * 100</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>mpg2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(mpg, <span class="at">consump =</span> <span class="dv">1</span> <span class="sc">/</span> hwy <span class="sc">*</span> <span class="fl">2.352</span> <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mpg2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 12
  manufact…¹ model displ  year   cyl trans drv     cty   hwy fl    class consump
  &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;
1 audi       a4      1.8  1999     4 auto… f        18    29 p     comp…    8.11
2 audi       a4      1.8  1999     4 manu… f        21    29 p     comp…    8.11
3 audi       a4      2    2008     4 manu… f        20    31 p     comp…    7.59
4 audi       a4      2    2008     4 auto… f        21    30 p     comp…    7.84
5 audi       a4      2.8  1999     6 auto… f        16    26 p     comp…    9.05
6 audi       a4      2.8  1999     6 manu… f        18    26 p     comp…    9.05
# … with abbreviated variable name ¹​manufacturer</code></pre>
</div>
</div>
</section>
<section id="calculate-a-new-variable-in-multiple-steps" class="level2">
<h2 class="anchored" data-anchor-id="calculate-a-new-variable-in-multiple-steps">Calculate a new variable in multiple steps</h2>
<p>In case of long formulas it can increase clarity to do the calculation stepwise</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>mpg2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(mpg, <span class="at">consump =</span> <span class="dv">1</span> <span class="sc">/</span> hwy <span class="sc">*</span> <span class="fl">2.352</span> <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="co"># alternative: stepwise</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>mpg2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(mpg, </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">consump =</span> <span class="dv">1</span> <span class="sc">/</span> hwy, <span class="co"># gallons per mile</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>              <span class="at">consump =</span> consump <span class="sc">*</span> <span class="fl">2.352</span> <span class="sc">*</span> <span class="dv">100</span>) <span class="co"># L/100km</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mpg2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 12
  manufact…¹ model displ  year   cyl trans drv     cty   hwy fl    class consump
  &lt;chr&gt;      &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;   &lt;dbl&gt;
1 audi       a4      1.8  1999     4 auto… f        18    29 p     comp…    8.11
2 audi       a4      1.8  1999     4 manu… f        21    29 p     comp…    8.11
3 audi       a4      2    2008     4 manu… f        20    31 p     comp…    7.59
4 audi       a4      2    2008     4 auto… f        21    30 p     comp…    7.84
5 audi       a4      2.8  1999     6 auto… f        16    26 p     comp…    9.05
6 audi       a4      2.8  1999     6 manu… f        18    26 p     comp…    9.05
# … with abbreviated variable name ¹​manufacturer</code></pre>
</div>
</div>
<p>Note: mutate() can immediatly re-use any newly created variables within the same call of <code>mutate()</code>.</p>
</section>
<section id="the-pipe-operators-and-1" class="level1">
<h1>The Pipe Operators: <code>%&gt;%</code> and <code>|&gt;</code></h1>
<p>R provides a useful operatur called the pipe. Initially it was introduced within the tidyverse, and the pipe operator looked like this <code>%&gt;%</code>.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="./figures/pipe.png" class="img-fluid" style="width:25.0%"></p>
</div>
</div>
<p>Recently, a pipe operator was also introduced natively in R, where it is <code>|&gt;</code>.</p>
<p>The idea is the same: The pipe is a really useful operator to string together multiple operations in R.</p>
<p>R-Studio Shortcut: <strong>Ctrl + Shift + M</strong></p>
<p>In R Studio you can choose in the global options, whether you want to use the tidy pipe or the native pipe.</p>
</section>
<section id="how-to-use-the-pipe" class="level2">
<h2 class="anchored" data-anchor-id="how-to-use-the-pipe">How to use the pipe %&gt;%</h2>
<p>Passes object on the lefthand side as first argument of function on righthand side.</p>
<ul>
<li><code>x %&gt;% f(y)</code> is similar to <code>f(x,y)</code></li>
</ul>
<p>Example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(mpg, class <span class="sc">==</span> <span class="st">"seater"</span> <span class="sc">|</span> class <span class="sc">==</span> <span class="st">"compact"</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a><span class="co"># is similar to</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(class <span class="sc">==</span> <span class="st">"seater"</span> <span class="sc">|</span> class <span class="sc">==</span> <span class="st">"compact"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="combine-multiple-operations" class="level2">
<h2 class="anchored" data-anchor-id="combine-multiple-operations">Combine Multiple Operations: %&gt;%</h2>
<p>It becomes to really useful when doing multiple operations at once:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>mpg_sub <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(class <span class="sc">==</span> <span class="st">"2seater"</span> <span class="sc">|</span> class <span class="sc">==</span> <span class="st">"compact"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(class, manufacturer, cyl, displ, hwy) <span class="sc">%&gt;%</span> </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">consump =</span> <span class="dv">1</span><span class="sc">/</span>hwy) <span class="sc">%&gt;%</span> </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(hwy)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mpg_sub)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  class   manufacturer   cyl displ   hwy consump
  &lt;chr&gt;   &lt;chr&gt;        &lt;int&gt; &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;
1 2seater chevrolet        8   5.7    23  0.0435
2 compact volkswagen       6   2.8    23  0.0435
3 2seater chevrolet        8   7      24  0.0417
4 compact volkswagen       6   2.8    24  0.0417
5 compact volkswagen       6   2.8    24  0.0417
6 compact audi             4   1.8    25  0.04  </code></pre>
</div>
</div>
<p>A lot is happening in these few lines, and the pipe allows for a very concise and readable piece of code.</p>
</section>
<section id="combine-pipe-with-ggplot" class="level2">
<h2 class="anchored" data-anchor-id="combine-pipe-with-ggplot">Combine Pipe with ggplot()</h2>
<p>We can even combine it with ggplot!</p>
<p>Note: within ggplot you have to use <code>+</code>, before the ggplot-call you have to use <code>%&gt;%</code>. Confusing indeed…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(class <span class="sc">==</span> <span class="st">"2seater"</span> <span class="sc">|</span> class <span class="sc">==</span> <span class="st">"compact"</span>) <span class="sc">%&gt;%</span>  </span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy, <span class="at">color =</span> class)) <span class="sc">+</span> </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="03_Wrangling_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" style="width:60.0%"></p>
</div>
</div>
</section>
<section id="time-to-try-it-yourself" class="level1">
<h1>Time to try it yourself:</h1>
<p>–&gt; check out Exercise Part 1.</p>
</section>
<section id="summarising-and-grouping-data" class="level1">
<h1>Summarising and grouping data</h1>
</section>
<section id="summarize-data-summarise" class="level2">
<h2 class="anchored" data-anchor-id="summarize-data-summarise">Summarize data: summarise()</h2>
<p>Collapses data frame to a single row by using a supplied function.</p>
<p>Example: What is the average <code>hwy</code> of all cars in the dataset?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">hwy =</span> <span class="fu">mean</span>(hwy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
    hwy
  &lt;dbl&gt;
1  23.4</code></pre>
</div>
</div>
</section>
<section id="multiple-summary-functions" class="level2">
<h2 class="anchored" data-anchor-id="multiple-summary-functions">multiple summary functions</h2>
<p>Also possible for multiple functions and variables</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">hwy_avg =</span> <span class="fu">mean</span>(hwy), </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">hwy_max =</span> <span class="fu">max</span>(hwy), </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">hwy_min =</span> <span class="fu">min</span>(hwy),</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">hwy_sd =</span> <span class="fu">sd</span>(hwy), </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">displ_avg =</span> <span class="fu">mean</span>(displ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 5
  hwy_avg hwy_max hwy_min hwy_sd displ_avg
    &lt;dbl&gt;   &lt;int&gt;   &lt;int&gt;  &lt;dbl&gt;     &lt;dbl&gt;
1    23.4      44      12   5.95      3.47</code></pre>
</div>
</div>
</section>
<section id="summarize-different-groups-group_by-summarise" class="level2">
<h2 class="anchored" data-anchor-id="summarize-different-groups-group_by-summarise">Summarize different groups: group_by() &amp; summarise()</h2>
<p>We can define groups in the dataset for which we calculate summary values.</p>
<p>Example: What is the average <code>hwy</code> for each car-class?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>by_class <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(class) <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">hwy_avg =</span> <span class="fu">mean</span>(hwy))</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>by_class</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
  class      hwy_avg
  &lt;chr&gt;        &lt;dbl&gt;
1 2seater       24.8
2 compact       28.3
3 midsize       27.3
4 minivan       22.4
5 pickup        16.9
6 subcompact    28.1
7 suv           18.1</code></pre>
</div>
</div>
<p>–&gt; we can summarise values for all kind of groups!</p>
</section>
<section id="group_by-with-several-grouping-variables" class="level2">
<h2 class="anchored" data-anchor-id="group_by-with-several-grouping-variables">Group_by() with several grouping variables</h2>
<p>We can also use several variables for the grouping.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>by_class_drv <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(class, drv) <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_hwy =</span> <span class="fu">mean</span>(hwy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'class'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>by_class_drv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 3
# Groups:   class [7]
   class      drv   avg_hwy
   &lt;chr&gt;      &lt;chr&gt;   &lt;dbl&gt;
 1 2seater    r        24.8
 2 compact    4        25.8
 3 compact    f        29.1
 4 midsize    4        24  
 5 midsize    f        27.6
 6 minivan    f        22.4
 7 pickup     4        16.9
 8 subcompact 4        26  
 9 subcompact f        30.5
10 subcompact r        23.2
11 suv        4        18.3
12 suv        r        17.5</code></pre>
</div>
</div>
<blockquote class="blockquote">
<ul>
<li><strong>Important</strong>: before we can group this dataset again we need to <code>ungroup()</code> first!</li>
</ul>
</blockquote>
</section>
<section id="advanced-example-group_by-summarise" class="level2">
<h2 class="anchored" data-anchor-id="advanced-example-group_by-summarise">Advanced Example: Group_by() &amp; summarise()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>by_class <span class="ot">&lt;-</span> mpg <span class="sc">%&gt;%</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(class) <span class="sc">%&gt;%</span> </span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">hwy_avg =</span> <span class="fu">mean</span>(hwy), </span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">hwy_sd =</span> <span class="fu">sd</span>(hwy), </span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">displ_avg =</span> <span class="fu">mean</span>(displ), </span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">displ_sd =</span> <span class="fu">sd</span>(displ), </span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">count =</span> <span class="fu">n</span>())</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>by_class</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 6
  class      hwy_avg hwy_sd displ_avg displ_sd count
  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;int&gt;
1 2seater       24.8   1.30      6.16    0.532     5
2 compact       28.3   3.78      2.33    0.452    47
3 midsize       27.3   2.14      2.92    0.719    41
4 minivan       22.4   2.06      3.39    0.453    11
5 pickup        16.9   2.27      4.42    0.829    33
6 subcompact    28.1   5.38      2.66    1.10     35
7 suv           18.1   2.98      4.46    1.07     62</code></pre>
</div>
</div>
</section>
<section id="advanced-example-group_by-summarise-ggplot" class="level2">
<h2 class="anchored" data-anchor-id="advanced-example-group_by-summarise-ggplot">Advanced Example: Group_by() &amp; summarise() &amp; ggplot()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>by_class <span class="sc">%&gt;%</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> displ_avg, <span class="at">y =</span> hwy_avg, <span class="at">color =</span> class,</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">ymin =</span> hwy_avg <span class="sc">-</span> hwy_sd, <span class="at">ymax =</span> hwy_avg <span class="sc">+</span> hwy_sd, </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>             <span class="at">xmin =</span> displ_avg <span class="sc">-</span> displ_sd, <span class="at">xmax =</span> displ_avg <span class="sc">+</span> displ_sd)) <span class="sc">+</span> </span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> count)) <span class="sc">+</span> </span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="at">width =</span> <span class="dv">0</span>) <span class="sc">+</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbarh</span>(<span class="at">height =</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="03_Wrangling_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" style="width:50.0%"></p>
</div>
</div>
</section>
<section id="group_by-mutate" class="level2">
<h2 class="anchored" data-anchor-id="group_by-mutate">Group_by() &amp; mutate()</h2>
<p>Calculations on group level without collapsing the dataset.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(class) <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">avg_hwy =</span> <span class="fu">mean</span>(hwy, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, hwy, avg_hwy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Adding missing grouping variables: `class`</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 234 × 5
# Groups:   class [7]
   class   manufacturer model        hwy avg_hwy
   &lt;chr&gt;   &lt;chr&gt;        &lt;chr&gt;      &lt;int&gt;   &lt;dbl&gt;
 1 compact audi         a4            29    28.3
 2 compact audi         a4            29    28.3
 3 compact audi         a4            31    28.3
 4 compact audi         a4            30    28.3
 5 compact audi         a4            26    28.3
 6 compact audi         a4            26    28.3
 7 compact audi         a4            27    28.3
 8 compact audi         a4 quattro    26    28.3
 9 compact audi         a4 quattro    25    28.3
10 compact audi         a4 quattro    28    28.3
# … with 224 more rows</code></pre>
</div>
</div>
</section>
<section id="missing-values" class="level1">
<h1>Missing values</h1>
<ul>
<li>Missing values are observations with no information.</li>
<li>this is <strong>not</strong> the same as zero!</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>(df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="cn">NA</span>,<span class="dv">7</span>), </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">9</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   x y
1  1 2
2  3 4
3 NA 2
4  7 9</code></pre>
</div>
</div>
</section>
<section id="how-to-check-for-missing-values" class="level2">
<h2 class="anchored" data-anchor-id="how-to-check-for-missing-values">How to check for missing values</h2>
<p>We can check for missing values by <code>is.na()</code>. Also the function summary() tells us about it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         x     y
[1,] FALSE FALSE
[2,] FALSE FALSE
[3,]  TRUE FALSE
[4,] FALSE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       x               y       
 Min.   :1.000   Min.   :2.00  
 1st Qu.:2.000   1st Qu.:2.00  
 Median :3.000   Median :3.00  
 Mean   :3.667   Mean   :4.25  
 3rd Qu.:5.000   3rd Qu.:5.25  
 Max.   :7.000   Max.   :9.00  
 NA's   :1                     </code></pre>
</div>
</div>
</section>
<section id="calculations-with-missing-values" class="level2">
<h2 class="anchored" data-anchor-id="calculations-with-missing-values">Calculations with missing values</h2>
<p>What happens if we summarize columns with missing values?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># summarise df</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">x =</span> <span class="fu">mean</span>(x), </span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">y =</span> <span class="fu">mean</span>(y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   x    y
1 NA 4.25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Often better:</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co"># summarise omitting NA's, </span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">x =</span> <span class="fu">mean</span>(x, <span class="at">na.rm=</span><span class="cn">TRUE</span>), </span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">y =</span> <span class="fu">mean</span>(y, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         x    y
1 3.666667 4.25</code></pre>
</div>
</div>
</section>
<section id="removing-nas-from-dataset" class="level2">
<h2 class="anchored" data-anchor-id="removing-nas-from-dataset">Removing NA’s from dataset</h2>
<p>You can remove observations (rows) from your dataset that include NA’s in a specific column using</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co"># remove all rows that contain NA's in the column hwy</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(hwy))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 234 × 11
   manufacturer model      displ  year   cyl trans drv     cty   hwy fl    class
   &lt;chr&gt;        &lt;chr&gt;      &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
 1 audi         a4           1.8  1999     4 auto… f        18    29 p     comp…
 2 audi         a4           1.8  1999     4 manu… f        21    29 p     comp…
 3 audi         a4           2    2008     4 manu… f        20    31 p     comp…
 4 audi         a4           2    2008     4 auto… f        21    30 p     comp…
 5 audi         a4           2.8  1999     6 auto… f        16    26 p     comp…
 6 audi         a4           2.8  1999     6 manu… f        18    26 p     comp…
 7 audi         a4           3.1  2008     6 auto… f        18    27 p     comp…
 8 audi         a4 quattro   1.8  1999     4 manu… 4        18    26 p     comp…
 9 audi         a4 quattro   1.8  1999     4 auto… 4        16    25 p     comp…
10 audi         a4 quattro   2    2008     4 manu… 4        20    28 p     comp…
# … with 224 more rows</code></pre>
</div>
</div>
</section>
<section id="data-wrangling-cheat-sheet" class="level1">
<h1>Data Wrangling Cheat Sheet</h1>
<p><a href="https://rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf" class="uri">https://rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf</a></p>
<div class="cell">
<div class="cell-output-display">
<p><img src="./figures/Cheatsheet_wrangling.png" class="img-fluid" style="width:60.0%"></p>
</div>
</div>
</section>
<section id="exercise-part-2" class="level1">
<h1>Exercise Part 2</h1>
<p>Things are coming together…</p>
</section>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
      <div class="nav-footer-center">Copyright 2022, Johannes Ingrisch</div>
  </div>
</footer>



</body></html>